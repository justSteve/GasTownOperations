<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gas Town Presentations</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #1a1a2e;
            color: #eaeaea;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            min-height: 100vh;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 3em 2em 2em;
            border-bottom: 1px solid rgba(0, 212, 255, 0.15);
        }

        .header h1 {
            font-size: 2.4em;
            font-weight: 600;
            color: #00d4ff;
            margin-bottom: 0.3em;
        }

        .header .subtitle {
            font-size: 1.05em;
            color: #888;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.5;
        }

        .header .stats {
            margin-top: 1.2em;
            display: flex;
            justify-content: center;
            gap: 2em;
            flex-wrap: wrap;
        }

        .header .stat {
            text-align: center;
        }

        .header .stat .num {
            font-size: 1.8em;
            font-weight: 700;
            color: #00d4ff;
            line-height: 1;
        }

        .header .stat .label {
            font-size: 0.7em;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 0.2em;
        }

        /* Loading state */
        .loading {
            text-align: center;
            padding: 4em 2em;
            color: #666;
            font-size: 1.1em;
        }

        .loading .spinner {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid rgba(0, 212, 255, 0.2);
            border-top-color: #00d4ff;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-right: 0.6em;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Error state */
        .error {
            text-align: center;
            padding: 4em 2em;
            color: #ff6464;
        }

        /* Card grid */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
            gap: 1.5em;
            padding: 2em;
            max-width: 1280px;
            margin: 0 auto;
        }

        /* Presentation card */
        .card {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.06), rgba(0, 212, 255, 0.02));
            border: 1px solid rgba(0, 212, 255, 0.15);
            border-radius: 12px;
            padding: 1.5em;
            transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
        }

        .card:hover {
            transform: translateY(-4px);
            border-color: rgba(0, 212, 255, 0.4);
            box-shadow: 0 8px 30px rgba(0, 212, 255, 0.1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.6em;
        }

        .card-header .bead {
            font-size: 0.65em;
            color: #00d4ff;
            background: rgba(0, 212, 255, 0.12);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 12px;
            padding: 0.2em 0.7em;
            white-space: nowrap;
            flex-shrink: 0;
            margin-left: 0.8em;
        }

        .card h2 {
            font-size: 1.3em;
            font-weight: 600;
            color: #eaeaea;
            line-height: 1.2;
        }

        .card .card-subtitle {
            font-size: 0.85em;
            color: #888;
            margin-top: 0.2em;
        }

        .card .description {
            font-size: 0.82em;
            color: #aaa;
            line-height: 1.5;
            margin-top: 0.8em;
            flex: 1;
        }

        .card .meta {
            display: flex;
            align-items: center;
            gap: 1em;
            margin-top: 1em;
            padding-top: 0.8em;
            border-top: 1px solid rgba(255, 255, 255, 0.06);
            font-size: 0.72em;
            color: #666;
            flex-wrap: wrap;
        }

        .card .meta .meta-item {
            display: flex;
            align-items: center;
            gap: 0.3em;
        }

        .card .meta .meta-icon {
            color: #00d4ff;
            font-size: 1.1em;
        }

        .card .status-badge {
            display: inline-block;
            font-size: 0.65em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 0.2em 0.6em;
            border-radius: 4px;
        }

        .card .status-badge.complete {
            background: rgba(100, 255, 150, 0.15);
            color: #64ff96;
            border: 1px solid rgba(100, 255, 150, 0.3);
        }

        .card .status-badge.draft {
            background: rgba(255, 170, 68, 0.15);
            color: #ffaa44;
            border: 1px solid rgba(255, 170, 68, 0.3);
        }

        .card .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4em;
            margin-top: 0.8em;
        }

        .card .tag {
            font-size: 0.65em;
            color: #00d4ff;
            background: rgba(0, 212, 255, 0.08);
            border: 1px solid rgba(0, 212, 255, 0.15);
            border-radius: 10px;
            padding: 0.15em 0.55em;
        }

        /* Connections section */
        .connections-section {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 2em 3em;
        }

        .connections-section h2 {
            font-size: 1.3em;
            color: #00d4ff;
            margin-bottom: 1em;
            font-weight: 600;
            text-align: center;
        }

        .connections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1em;
        }

        .connection-card {
            background: rgba(0, 212, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 10px;
            padding: 1em 1.2em;
        }

        .connection-card h3 {
            font-size: 0.85em;
            color: #eaeaea;
            font-weight: 600;
            margin-bottom: 0.4em;
        }

        .connection-card .conn-list {
            list-style: none;
            padding: 0;
        }

        .connection-card .conn-list li {
            font-size: 0.75em;
            color: #888;
            padding: 0.2em 0;
        }

        .connection-card .conn-list li .arrow {
            color: #00d4ff;
            margin-right: 0.4em;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 2em;
            color: #444;
            font-size: 0.75em;
            border-top: 1px solid rgba(255, 255, 255, 0.04);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .card-grid {
                grid-template-columns: 1fr;
                padding: 1em;
            }

            .connections-grid {
                grid-template-columns: 1fr;
            }

            .header .stats {
                gap: 1em;
            }
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>Gas Town Presentations</h1>
        <p class="subtitle">
            The presentation series for the Gas Town ecosystem -- architecture, interaction models, and the convergence of autonomous agent infrastructure.
        </p>
        <div class="stats" id="stats"></div>
    </div>

    <div id="content">
        <div class="loading">
            <span class="spinner"></span>
            Loading presentations...
        </div>
    </div>

    <div class="connections-section" id="connections-section" style="display: none;">
        <h2>Connections Between Presentations</h2>
        <div class="connections-grid" id="connections-grid"></div>
    </div>

    <div class="footer">
        GasTown Operations &middot; February 2026
    </div>

    <script>
        (async function() {
            const contentEl = document.getElementById('content');
            const statsEl = document.getElementById('stats');
            const connectionsSection = document.getElementById('connections-section');
            const connectionsGrid = document.getElementById('connections-grid');

            // Inline manifest data -- fallback for file:// protocol where fetch is blocked.
            // Authoring agents: update this array when creating or editing presentations.
            var INLINE_MANIFESTS = [{"id":"crudengine-exec-walkthrough","title":"CrudEngine","subtitle":"The Trust Layer for Zgent Factory","date":"2026-02","author":"COO","bead":"gt-pres1","status":"complete","slideCount":14,"description":"Executive technical walkthrough of CrudEngine -- the lifecycle management layer that gives Gas Town agents reliable, observable, auditable configuration management across all 7 Claude Code artifact types.","narrativeArc":"The presentation frames the scaling problem (manual config fails at 20+ agents), introduces CrudEngine as the solution (unified CRUD with full observability), and demonstrates the business value (audit trail, versioning, real-time events). The deeper point: CrudEngine is not just a tool -- it is the trust layer that must be bulletproof before Zgents go production.","tags":["crudengine","infrastructure","observability","audit-trail","versioning","artifacts","executive"],"connections":["infrastructure-stack","zgent-anatomy"],"slides":[{"index":0,"title":"CrudEngine","role":"Establishes CrudEngine as the trust layer and frames the presentation as an executive walkthrough"},{"index":1,"title":"The Zgent Factory Vision","role":"Sets the scale context -- 20-30 simultaneous agents, 7 artifact types, one unified engine"},{"index":2,"title":"The Scale Challenge","role":"Creates tension by contrasting manual config at small scale vs. the need for automation at fleet scale"},{"index":3,"title":"Before CrudEngine","role":"Articulates the pain points that justify the infrastructure investment"},{"index":4,"title":"Introducing CrudEngine","role":"Presents the solution with its four key properties: unified interface, observability, versioning, subscriptions"},{"index":5,"title":"Architecture Overview","role":"Shows the data flow pipeline from ECC input through CrudEngine to deployed Zgent configs"},{"index":6,"title":"The 7 Artifact Types","role":"Enumerates the artifact types that CrudEngine manages with dedicated handlers"},{"index":7,"title":"Built-in Observability","role":"Details the traffic logging and subscription systems that make every operation transparent"},{"index":8,"title":"Explorer Integration","role":"Shows how scene execution becomes automatically tracked when routed through CrudEngine"},{"index":9,"title":"Demo: Traffic Logging","role":"Provides concrete evidence with actual output showing operations being tracked"},{"index":10,"title":"Business Value","role":"Translates technical capabilities into operational benefits -- the 20x leverage argument"},{"index":11,"title":"Strategic Position","role":"Positions CrudEngine as foundational infrastructure that all future capabilities depend on"},{"index":12,"title":"Status & Next Steps","role":"Provides honest accounting of what is delivered and what remains"},{"index":13,"title":"Questions","role":"Closing slide with commit reference and key metrics for credibility"}]},{"id":"zgent-anatomy","title":"Anatomy of a Zgent","subtitle":"What Makes an Autonomous Agent Well-Formed","date":"2026-02","author":"COO","bead":"gt-ref.1","status":"complete","slideCount":15,"description":"Walks through the complete anatomy of a Zgent using an organism metaphor -- skeleton (ECC), nervous system (CrudEngine), senses (AOE), voice (API), habitat (tmuxMOO). Traces the lineage from 1995 MOO objects to 2026 Claude Code agents.","narrativeArc":"The presentation builds an anatomical metaphor: a Zgent is a complete organism, not just an agent with config files. Each layer (skeleton, nerves, senses, voice, habitat) maps to a specific subsystem. The deeper insight: this is architectural continuity from 1995 MOO VEEs -- the concept was right, the technology finally caught up.","tags":["zgent","anatomy","ecc","crudengine","aoe","tmuxmoo","moo","academy"],"connections":["convergence-map","infrastructure-stack","rooms-and-presence"],"slides":[{"index":0,"title":"Anatomy of a Zgent","role":"Sets up the organism metaphor and places this in the Gas Town ecosystem"},{"index":1,"title":"The Question","role":"Frames the core challenge -- what does reliable multi-agent collaboration require?"},{"index":2,"title":"What Is a Zgent?","role":"Defines the four graduation properties and introduces the organism vs. brain-in-a-jar distinction"},{"index":3,"title":"The Artifact Layer","role":"Introduces the skeleton -- the 7 Claude Code artifacts that give a Zgent its structure"},{"index":4,"title":"CrudEngine","role":"Introduces the nervous system -- lifecycle management that keeps the skeleton alive"},{"index":5,"title":"AOE: Perception and Reporting","role":"Introduces the senses -- logging, errors, events, and scene awareness"},{"index":6,"title":"Publishing the API","role":"Introduces the voice -- the inter-agent protocol that enables discovery and querying"},{"index":7,"title":"tmuxMOO: Where Zgents Live","role":"Introduces the habitat -- persistent text environments with shared presence"},{"index":8,"title":"30 Years in the Making","role":"Connects the 1995 MOO vision to the 2026 Zgent architecture -- continuity, not nostalgia"},{"index":9,"title":"A Day in the Life","role":"Makes the organism concrete with a temporal walkthrough from startup to collaboration"},{"index":10,"title":"The Gas Town Academy","role":"Contrasts raw agents with graduated Zgents to crystallize the value of conventions"},{"index":11,"title":"What Exists Today","role":"Provides honest status accounting -- what is built, what is prototyped, what is planned"},{"index":12,"title":"The Horizon: DReader","role":"Points to the first graduation candidate to make the pattern concrete and testable"},{"index":13,"title":"The Complete Organism","role":"Synthesizes all five layers into the central insight -- a Zgent is a complete organism"},{"index":14,"title":"Questions","role":"Reinforces the key takeaways and opens discussion"}]},{"id":"rooms-and-presence","title":"Rooms & Presence","subtitle":"How Humans and Agents Share Space","date":"2026-02","author":"COO","bead":"gt-ref.2","status":"complete","slideCount":15,"description":"Tells the interaction model story -- how humans and agents inhabit shared spaces together in the Strades platform. Synthesizes the MOO origin (1995-97), the tmux-as-transport insight, the tmuxMOO prototype, and session topology into a narrative about the future of human-agent collaboration.","narrativeArc":"The presentation traces a 30-year arc from MOO VEEs to tmuxMOO. The core thesis: MOO was not wrong -- it was early. The text-first, persistent-room, programmable-object paradigm IS the right interaction model. tmux is the transport MOO needed; LLMs are the intelligence MOO's objects lacked. The convergence is not accidental.","tags":["tmuxmoo","rooms","presence","moo","tmux","interaction","voice","topology","strades"],"connections":["zgent-anatomy","convergence-map","infrastructure-stack"],"slides":[{"index":0,"title":"Rooms & Presence","role":"Frames this as the interaction model story for the Strades platform"},{"index":1,"title":"The Memory (1995)","role":"Establishes the personal origin story -- Steve's MOO VEE work and what it had vs. lacked"},{"index":2,"title":"The Realization","role":"The emotional pivot -- recognizing that every 1995 concept maps to 2026 architecture"},{"index":3,"title":"Why tmux, Not Just Better Telnet","role":"Articulates the categorical (not incremental) upgrade from pipe to programmable stage"},{"index":4,"title":"Shared Presence","role":"Demonstrates actual co-habitation via send-keys -- not simulated, real"},{"index":5,"title":"Panes as Rooms","role":"Shows the spatial metaphor preserved in the 4-pane trading layout"},{"index":6,"title":"Agents Reading the Room","role":"Reveals the capture-pane pattern as the MOO verb system realized"},{"index":7,"title":"Persistence Without Presence","role":"Demonstrates the killer feature -- detach, walk away, reattach, nothing lost"},{"index":8,"title":"Architecture: Two Layers","role":"Positions Workshop (tmux) and Trading Floor (web UI) as complementary, not competing"},{"index":9,"title":"Session Topology","role":"Presents the hybrid design -- shared headless agents, personal user views"},{"index":10,"title":"The Demo Today","role":"Grounds the vision in what actually works right now -- the SPX selloff narrative"},{"index":11,"title":"Voice as a Layer","role":"Shows how voice rides on text-first architecture -- delivering what MOO promised"},{"index":12,"title":"Honest Gaps","role":"Maintains credibility by enumerating unsolved problems"},{"index":13,"title":"The Vision Forward","role":"Scales to the full vision -- 36 humans, 10 instruments, 30+ agents in shared spaces"},{"index":14,"title":"Questions","role":"Provides reference materials and closes with the core thesis"}]},{"id":"infrastructure-stack","title":"The Infrastructure Stack","subtitle":"How Gas Town Agents Get Their Plumbing","date":"2026-02","author":"COO","bead":"gt-ref.3","status":"complete","slideCount":16,"description":"Explains how ECC, AOE, CrudEngine, and Explorer compose into a coherent infrastructure stack for managing Gas Town agent configurations at scale. Includes 6 Mermaid diagrams covering the stack overview, event system, CrudEngine flow, Explorer pipeline, package dependencies, and integration points.","narrativeArc":"The presentation builds the stack bottom-up: ECC provides the data model, AOE provides the runtime, CrudEngine provides persistence, Explorer proves the pipeline. The key insight: this is not four tools bolted together -- it is a coherent system designed around one principle: observability at every layer. Each layer adds a different kind of visibility.","tags":["infrastructure","ecc","aoe","crudengine","explorer","observability","architecture","typescript"],"connections":["crudengine-exec-walkthrough","zgent-anatomy","convergence-map"],"slides":[{"index":0,"title":"The Infrastructure Stack","role":"Frames the question: why build four layers of infrastructure before deploying a single agent?"},{"index":1,"title":"The Problem","role":"Articulates the four pain points that justify infrastructure-first investment"},{"index":2,"title":"The Stack","role":"The money slide -- 4-layer Mermaid diagram showing bottom-up composition"},{"index":3,"title":"Layer 1: ECC","role":"Details the data model layer -- 7 artifact types, ecc/eccx namespace, TypeScript types"},{"index":4,"title":"Layer 2: AOE","role":"Details the runtime layer -- multi-transport logging and hierarchical error system"},{"index":5,"title":"AOE Events","role":"Zooms into the 13 typed event types and type-safe pub/sub pattern"},{"index":6,"title":"Layer 3: CrudEngine","role":"Details the persistence layer -- traffic logging, versioning, subscriptions"},{"index":7,"title":"CrudEngine Internals","role":"Shows the 7 handlers, 5 operations, and typed convenience methods"},{"index":8,"title":"Layer 4: Explorer","role":"Presents the reference implementation -- scene loading through event capture"},{"index":9,"title":"Observability First","role":"Delivers the key insight -- each layer adds a different kind of visibility"},{"index":10,"title":"The Composition","role":"Shows package dependency graph -- clean, bottom-up, no cycles"},{"index":11,"title":"In Practice","role":"Traces a single Create a Skill operation through all 4 layers via sequence diagram"},{"index":12,"title":"The Numbers","role":"Provides maturity metrics -- 293+ tests, 10,305 lines, 13 event types"},{"index":13,"title":"Integration Points","role":"Shows where DReader, Strades agents, and future Zgents plug into the stack"},{"index":14,"title":"What's Next","role":"Presents the roadmap from immediate fixes through production deployment to dashboard"},{"index":15,"title":"Close","role":"Restates the four layers and the one principle -- every operation observable"}]},{"id":"convergence-map","title":"The Convergence Map","subtitle":"Where Everything Connects","date":"2026-02","author":"COO","bead":"gt-ref.4","status":"complete","slideCount":16,"description":"Meta-synthesis across the Gas Town ecosystem. Identifies seven structural connections between Infrastructure (ECC, CrudEngine, AOE), Interaction (tmuxMOO), and Ecosystem (Academy, conventions, presentations) -- revealing them as three projections of one coherent system.","narrativeArc":"The presentation starts with three seemingly separate work streams, builds suspicion that they are connected, then proves it with seven specific connections. Each connection should feel like a small revelation; together they are overwhelming. The master insight: we are not building three things -- we are building one thing from three angles. The convergence was not planned; it emerged from following observability-first consistently.","tags":["convergence","meta-synthesis","observability","architecture","moo","ecosystem","infrastructure","interaction"],"connections":["zgent-anatomy","rooms-and-presence","infrastructure-stack","crudengine-exec-walkthrough"],"slides":[{"index":0,"title":"The Convergence Map","role":"Positions this as the most important presentation in the series -- meta-synthesis across all domains"},{"index":1,"title":"The Landscape","role":"Presents three work streams as isolated islands to set up the reveal"},{"index":2,"title":"The Suspicion","role":"The pivot moment -- these are not separate, they are three projections of one system"},{"index":3,"title":"Connection 1: Observability IS the Product","role":"Reveals that tmuxMOO, traffic logs, and events are three surfaces of one product"},{"index":4,"title":"Connection 2: Rooms All the Way Down","role":"Shows that pane, log directory, scene, and context profile are isomorphic"},{"index":5,"title":"Connection 3: Traffic Logs = Narrative Replay","role":"Connects CrudEngine audit trail to tmuxMOO replay mode"},{"index":6,"title":"Connection 4: Presentations as API","role":"Reveals that presentation standard and API publication are the same requirement"},{"index":7,"title":"Connection 5: The COO as World Builder","role":"Shows the define-instantiate-execute-display pipeline as world building"},{"index":8,"title":"Connection 6: Academy = Test Suite","role":"Maps graduation criteria directly to automated test categories"},{"index":9,"title":"Connection 7: Scene = Room = Context","role":"Identifies the most structurally significant convergence -- three names for one primitive"},{"index":10,"title":"The Unified Architecture","role":"The money diagram -- all three layers composed into one coherent system"},{"index":11,"title":"What This Means","role":"Distills the master insight: programmable, inhabitable, interoperable"},{"index":12,"title":"The Gaps","role":"Maintains credibility by identifying where convergence is incomplete"},{"index":13,"title":"The 30-Year Arc","role":"Places Gas Town in the 1995-2025-2026 historical trajectory"},{"index":14,"title":"What Comes Next","role":"Converts analysis into actionable work items -- the convergence map generates its own backlog"},{"index":15,"title":"Questions / Close","role":"Restates the master insight: one system expressing itself at three levels of abstraction"}]}];

            try {
                // Step 1: Load manifests -- try fetch first, fall back to inline data
                const manifests = [];
                const errors = [];
                let usedInline = false;

                try {
                    const registryResponse = await fetch('registry.json');
                    if (!registryResponse.ok) throw new Error('Could not load registry.json');
                    const registry = await registryResponse.json();

                    await Promise.all(registry.presentations.map(async (dir) => {
                        try {
                            const resp = await fetch(`${dir}/manifest.json`);
                            if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
                            const manifest = await resp.json();
                            manifests.push(manifest);
                        } catch (e) {
                            errors.push({ dir, error: e.message });
                        }
                    }));
                } catch (fetchErr) {
                    // fetch failed (file:// protocol) -- use inline data
                    manifests.push(...INLINE_MANIFESTS);
                    usedInline = true;
                }

                if (manifests.length === 0) {
                    contentEl.innerHTML = '<div class="error">No presentations could be loaded.</div>';
                    return;
                }

                // Sort by date descending, then by title
                manifests.sort((a, b) => {
                    if (a.date !== b.date) return b.date.localeCompare(a.date);
                    return a.title.localeCompare(b.title);
                });

                // Build title-by-id lookup
                const titleById = {};
                manifests.forEach(m => { titleById[m.id] = m.title; });

                // Step 3: Render stats
                const totalSlides = manifests.reduce((sum, m) => sum + (m.slideCount || 0), 0);
                statsEl.innerHTML = `
                    <div class="stat">
                        <div class="num">${manifests.length}</div>
                        <div class="label">Presentations</div>
                    </div>
                    <div class="stat">
                        <div class="num">${totalSlides}</div>
                        <div class="label">Total Slides</div>
                    </div>
                    <div class="stat">
                        <div class="num">${new Set(manifests.flatMap(m => m.tags || [])).size}</div>
                        <div class="label">Unique Tags</div>
                    </div>
                `;

                // Step 4: Render card grid
                const gridHTML = manifests.map(m => {
                    const tags = (m.tags || []).slice(0, 6).map(t =>
                        `<span class="tag">${escapeHtml(t)}</span>`
                    ).join('');

                    const statusClass = (m.status || 'draft').toLowerCase();

                    return `
                        <a class="card" href="${escapeHtml(m.id)}/index.html">
                            <div class="card-header">
                                <div>
                                    <h2>${escapeHtml(m.title)}</h2>
                                    <div class="card-subtitle">${escapeHtml(m.subtitle || '')}</div>
                                </div>
                                <span class="bead">${escapeHtml(m.bead || '')}</span>
                            </div>
                            <div class="description">${escapeHtml(m.description || '')}</div>
                            <div class="tags">${tags}</div>
                            <div class="meta">
                                <span class="status-badge ${statusClass}">${escapeHtml(m.status || 'draft')}</span>
                                <span class="meta-item">
                                    <span class="meta-icon">&#9654;</span>
                                    ${m.slideCount || '?'} slides
                                </span>
                                <span class="meta-item">
                                    <span class="meta-icon">&#128197;</span>
                                    ${escapeHtml(m.date || '')}
                                </span>
                                <span class="meta-item">
                                    <span class="meta-icon">&#9998;</span>
                                    ${escapeHtml(m.author || '')}
                                </span>
                            </div>
                        </a>
                    `;
                }).join('');

                contentEl.innerHTML = `<div class="card-grid">${gridHTML}</div>`;

                // Step 5: Render connections
                const connectionPairs = [];
                const seenPairs = new Set();

                manifests.forEach(m => {
                    (m.connections || []).forEach(connId => {
                        const pairKey = [m.id, connId].sort().join('::');
                        if (!seenPairs.has(pairKey) && titleById[connId]) {
                            seenPairs.add(pairKey);
                            connectionPairs.push({
                                from: m.id,
                                fromTitle: m.title,
                                to: connId,
                                toTitle: titleById[connId]
                            });
                        }
                    });
                });

                if (connectionPairs.length > 0) {
                    // Group connections by presentation
                    const connectionsByPres = {};
                    manifests.forEach(m => {
                        const conns = (m.connections || []).filter(c => titleById[c]);
                        if (conns.length > 0) {
                            connectionsByPres[m.id] = {
                                title: m.title,
                                connections: conns.map(c => titleById[c])
                            };
                        }
                    });

                    connectionsGrid.innerHTML = Object.values(connectionsByPres).map(p => `
                        <div class="connection-card">
                            <h3>${escapeHtml(p.title)}</h3>
                            <ul class="conn-list">
                                ${p.connections.map(c => `
                                    <li><span class="arrow">&#8594;</span>${escapeHtml(c)}</li>
                                `).join('')}
                            </ul>
                        </div>
                    `).join('');

                    connectionsSection.style.display = 'block';
                }

            } catch (e) {
                contentEl.innerHTML = `<div class="error">Failed to load presentations: ${escapeHtml(e.message)}</div>`;
            }

            function escapeHtml(str) {
                if (!str) return '';
                const div = document.createElement('div');
                div.textContent = str;
                return div.innerHTML;
            }
        })();
    </script>

</body>
</html>
